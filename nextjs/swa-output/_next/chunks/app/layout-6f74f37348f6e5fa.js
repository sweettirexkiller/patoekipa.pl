(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{65577:function(e,t,r){Promise.resolve().then(r.bind(r,59547)),Promise.resolve().then(r.bind(r,3649)),Promise.resolve().then(r.t.bind(r,29280,23)),Promise.resolve().then(r.t.bind(r,54987,23)),Promise.resolve().then(r.t.bind(r,96866,23))},59547:function(e,t,r){"use strict";r.d(t,{default:function(){return x}});var s=r(37821),a=r(58078),l=r(58504),n=r(75505),i=r(31838),d=r(541),o=r(60793);let c={code(e){let{node:t,inline:r,className:a,children:l,...n}=e,i=/language-(\w+)/.exec(a||"");return!r&&i?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-slate-800 text-slate-300 px-4 py-2 rounded-t-lg",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:i[1]}),(0,s.jsx)("button",{onClick:()=>navigator.clipboard.writeText(String(l).replace(/\n$/,"")),className:"text-xs bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded transition-colors",children:"Copy"})]}),(0,s.jsx)(d.Z,{style:o.Z,language:i[1],PreTag:"div",className:"!mt-0 !rounded-t-none",...n,children:String(l).replace(/\n$/,"")})]}):(0,s.jsx)("code",{className:"bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 px-1.5 py-0.5 rounded text-sm font-mono",...n,children:l})},h1:e=>{let{children:t}=e;return(0,s.jsx)("h1",{className:"text-xl font-bold text-slate-800 dark:text-white mb-3 border-b border-slate-200 dark:border-slate-700 pb-2",children:t})},h2:e=>{let{children:t}=e;return(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:t})},h3:e=>{let{children:t}=e;return(0,s.jsx)("h3",{className:"text-md font-semibold text-slate-800 dark:text-white mb-2",children:t})},p:e=>{let{children:t}=e;return(0,s.jsx)("p",{className:"text-slate-700 dark:text-slate-300 mb-2 leading-relaxed",children:t})},ul:e=>{let{children:t}=e;return(0,s.jsx)("ul",{className:"list-disc list-inside text-slate-700 dark:text-slate-300 mb-2 space-y-1",children:t})},ol:e=>{let{children:t}=e;return(0,s.jsx)("ol",{className:"list-decimal list-inside text-slate-700 dark:text-slate-300 mb-2 space-y-1",children:t})},li:e=>{let{children:t}=e;return(0,s.jsx)("li",{className:"text-slate-700 dark:text-slate-300",children:t})},blockquote:e=>{let{children:t}=e;return(0,s.jsx)("blockquote",{className:"border-l-4 border-blue-500 pl-4 py-2 bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300 italic mb-2",children:t})},a:e=>{let{href:t,children:r}=e;return(0,s.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:r})},table:e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"overflow-x-auto mb-2",children:(0,s.jsx)("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:t})})},th:e=>{let{children:t}=e;return(0,s.jsx)("th",{className:"border border-slate-300 dark:border-slate-700 bg-slate-100 dark:bg-slate-800 px-3 py-2 text-left font-semibold text-slate-800 dark:text-white",children:t})},td:e=>{let{children:t}=e;return(0,s.jsx)("td",{className:"border border-slate-300 dark:border-slate-700 px-3 py-2 text-slate-700 dark:text-slate-300",children:t})}};function x(){let e=(0,l.usePathname)(),[t,r]=(0,a.useState)(!1),[d,o]=(0,a.useState)([{id:"1",text:"Elo kurwa! Witaj w chacie z AI-owym pierdołą zespołu Patoekipa. Co chcesz wiedzieć o naszej bandzie zjebanych koders\xf3w?",isUser:!1,timestamp:new Date}]),[x,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),[b,p]=(0,a.useState)(!0),g=(0,a.useRef)(null),f=(0,a.useRef)(null),w=(0,a.useRef)(null),j=(0,a.useRef)(null),[y,v]=(0,a.useState)(!1);if(null==e?void 0:e.startsWith("/admin"))return null;let k=()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{k()},[d]),(0,a.useEffect)(()=>{t&&f.current&&f.current.focus()},[t]);let N=e=>e.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"}),S=async e=>{if(e.preventDefault(),!x.trim()||m)return;let t={id:Date.now().toString(),text:x.trim(),isUser:!0,timestamp:new Date};o(e=>[...e,t]),u(""),h(!0);try{var r;w.current&&w.current.abort(),w.current=new AbortController;let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...d.filter(e=>!e.isStreaming).map(e=>({role:e.isUser?"user":"assistant",content:e.text})),{role:"user",content:t.text}]}),signal:w.current.signal});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));h(!1),v(!0),await new Promise(e=>setTimeout(e,50));let s=null===(r=e.body)||void 0===r?void 0:r.getReader(),a=new TextDecoder;if(s){let e="";try{for(;;){let{done:t,value:r}=await s.read();if(t)break;for(let t of a.decode(r).split("\n"))if(t.startsWith("data: "))try{let r=JSON.parse(t.slice(6));if(r.content&&(e+=r.content,j.current)){let t=j.current.querySelector(".streaming-text-content");t&&(t.textContent=e,k())}}catch(e){}}}finally{o(t=>[...t,{id:Date.now().toString(),text:e,isUser:!1,timestamp:new Date}]),v(!1)}}}catch(t){if(h(!1),"AbortError"===t.name)return;p(!1);let e={id:(Date.now()+2).toString(),text:"Przepraszam, wystąpił problem z połączeniem. Spr\xf3buj ponownie za chwilę.",isUser:!1,timestamp:new Date};o(t=>[...t,e]),setTimeout(()=>p(!0),3e3)}};return(0,s.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 chat-widget-container",children:[t&&(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-80 h-[500px] sm:w-96 sm:h-[600px] max-sm:fixed max-sm:inset-4 max-sm:w-auto max-sm:h-auto flex flex-col border border-gray-200 dark:border-gray-700 animate-chat-widget-slide-up",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg",children:"\uD83E\uDD16"})}),b&&(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-sm",children:"Asystent AI Patoekipa"}),(0,s.jsx)("p",{className:"text-xs text-blue-100",children:b?"Online":"Offline"})]})]}),(0,s.jsx)("button",{onClick:()=>r(!1),className:"p-1 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Zamknij chat",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900",children:[d.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"flex ".concat(e.isUser?"justify-end":"justify-start"," animate-message-slide-in"),children:e.isUser?(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-2xl rounded-br-md px-4 py-3 max-w-xs shadow-sm chat-message",children:[(0,s.jsx)("p",{className:"whitespace-pre-wrap leading-relaxed",children:e.text}),(0,s.jsx)("p",{className:"text-xs text-blue-100 mt-2",children:N(e.timestamp)})]}):(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-md px-4 py-3 max-w-xs shadow-sm border border-gray-200 dark:border-gray-600 chat-message",children:[(0,s.jsx)("div",{className:"whitespace-pre-wrap leading-relaxed",children:(0,s.jsx)(n.UG,{remarkPlugins:[i.Z],components:c,children:e.text})}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:N(e.timestamp)})]})})},e.id)),m&&(0,s.jsx)(()=>(0,s.jsx)("div",{className:"flex justify-start mb-3 animate-message-slide-in",children:(0,s.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-md px-4 py-3 max-w-xs shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full typing-dot"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full typing-dot",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full typing-dot",style:{animationDelay:"0.4s"}})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"AI pisze..."})]})})}),{}),y&&(0,s.jsx)("div",{className:"flex justify-start animate-message-slide-in",children:(0,s.jsxs)("div",{ref:j,className:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-md px-4 py-3 max-w-xs shadow-sm relative",children:[(0,s.jsxs)("div",{className:"whitespace-pre-wrap leading-relaxed",children:[(0,s.jsx)("span",{className:"streaming-text-content"}),(0,s.jsx)("span",{className:"inline-block w-0.5 h-5 bg-blue-500 ml-1 animate-pulse opacity-75"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:N(new Date)})]})}),(0,s.jsx)("div",{ref:g})]}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 rounded-b-2xl",children:(0,s.jsxs)("form",{onSubmit:S,className:"flex space-x-2",children:[(0,s.jsx)("div",{className:"flex-1 relative",children:(0,s.jsx)("input",{ref:f,type:"text",value:x,onChange:e=>u(e.target.value),placeholder:b?"Napisz wiadomość...":"Brak połączenia...",disabled:m||!b,className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed bg-gray-50 dark:bg-gray-700 dark:text-white chat-input resize-none"})}),(0,s.jsx)("button",{type:"submit",disabled:!x.trim()||m||!b,className:"px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none",children:m?(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]}),!t&&(0,s.jsxs)("button",{onClick:()=>r(!0),className:"relative bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-full p-4 shadow-2xl transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800","aria-label":"Open chat",children:[(0,s.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white text-xs rounded-full flex items-center justify-center animate-pulse",children:"1"}),(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})]})]})}},3649:function(e,t,r){"use strict";r.d(t,{ChatWidgetProvider:function(){return n}});var s=r(37821),a=r(58078);let l=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,a.useState)(!1);return(0,s.jsx)(l.Provider,{value:{isOpen:r,setIsOpen:n},children:t})}},96866:function(){}},function(e){e.O(0,[466,399,115,364,744],function(){return e(e.s=65577)}),_N_E=e.O()}]);